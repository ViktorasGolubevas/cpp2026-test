# U3: Kompozicija (has-a ryÅ¡ys)

**SavaitÄ—s:** 5-6  
**Svoris:** 1 balas  
**Terminas:** SavaitÄ—s 6 pabaiga

---

## ğŸ“š PrieÅ¡ pradedant

**Priminimas:** Taikomi tie patys reikalavimai kaip U1-U2.  
ğŸ‘‰ Å½r. **[UÅ¾duoÄiÅ³ Gidas](UzduotiuGidas.md)**

---

## ğŸ¯ UÅ¾duoties tikslas

IÅ¡mokti kurti sudÄ—tingesnes klases su **kompozicija** (has-a ryÅ¡ys). Suprasti, kaip objektai gali **turÄ—ti** kitus objektus. Praktikuoti **statinius narius** ir **globalias funkcijas**.

---

## ğŸ“š Mokymosi tikslai

AtlikÄ™ Å¡iÄ… uÅ¾duotÄ¯, mokÄ—site:

- âœ… Kurti klases, kurios "turi" kitas klases (kompozicija)
- âœ… Dirbti su `vector<Objektas>` (objektÅ³ kolekcija)
- âœ… Dirbti su rodyklÄ—mis Ä¯ objektus (`Objektas*`)
- âœ… Naudoti **statinius narius** (klasÄ—s lygio duomenys)
- âœ… Kurti **globalias funkcijas** (ne metodus)
- âœ… Suprasti kompozicijos vs agregacijos skirtumus

---

## ğŸ’¡ Kas yra kompozicija?

**Kompozicija** - tai santykis, kai vienas objektas **turi** (contains) kitÄ… objektÄ….

**Pavyzdys:**
- ğŸ  **Kambarys** HAS **LangÄ…** (has-a)
- ğŸ  **Kambarys** HAS **Duris** (has-a)

**Skirtumas nuo paveldÄ—jimo:**
- **PaveldÄ—jimas**: `Automobilis` IS-A `Transportas` (U6 tema)
- **Kompozicija**: `Automobilis` HAS-A `VariklÄ¯` (Å¡i tema!)

**Realaus pasaulio analogija:**
```
Kambarys (container)
  â”œâ”€ Langai (components - value semantics)
  â”‚   â”œâ”€ Langas 1
  â”‚   â”œâ”€ Langas 2
  â”‚   â””â”€ ...
  â””â”€ Durys (component - pointer semantics)
      â””â”€ Durys*
```

---

## ğŸ“‹ UÅ¾duoties Å¾ingsniai

### **1 Å¾ingsnis: Langas ir Durys klasÄ—s**

**Direktorija:** `U3/01/`

**Reikalavimai:**

Sukurkite **2 paprastas klases**:

#### **Langas klasÄ—:**

**Private nariai:**
- `float aukstis` - lango aukÅ¡tis (metrais)
- `float plotis` - lango plotis (metrais)
- `static int sukurtaLangu` - **statinis** skaitiklis (kiek langÅ³ sukurta)

**Public metodai:**
- `Langas(float a, float p)` - konstruktorius
  - Inicializuoja `aukstis`, `plotis`
  - Padidina `sukurtaLangu++`
  - Logging: `[DEBUG] Langas sukurtas...`
- `~Langas()` - destruktorius
  - SumaÅ¾ina `sukurtaLangu--`
  - Logging: `[DEBUG] Langas sunaikintas...`
- `float gautiAuksti() const` - getter
- `float gautiPloti() const` - getter
- `float apskaiciuotiPlota() const` - aukÅ¡tis Ã— plotis
- `static int gautiSukurtaLangu()` - static getter

#### **Durys klasÄ—:**

**AnalogiÅ¡kai** kaip `Langas`:
- Private: `aukstis`, `plotis`, `static int sukurtaDuriu`
- Public: konstruktorius, destruktorius, getters, `apskaiciuotiPlota()`, static getter

**SVARBU - Statiniai nariai:**

Statiniai nariai priskiriami **uÅ¾ klasÄ—s ribÅ³** `.cpp` faile:

```cpp
// Langas.cpp
int Langas::sukurtaLangu = 0;  // Inicializacija
```

**Testas:**
```cpp
cout << "Langu: " << Langas::gautiSukurtaLangu() << endl;  // 0

Langas l1(1.5, 1.0);
Langas l2(2.0, 1.2);

cout << "Langu: " << Langas::gautiSukurtaLangu() << endl;  // 2
```

**FailÅ³ struktÅ«ra:**
```
U3/01/
â”œâ”€â”€ Langas.h
â”œâ”€â”€ Langas.cpp
â”œâ”€â”€ Durys.h
â”œâ”€â”€ Durys.cpp
â”œâ”€â”€ main.cpp
â””â”€â”€ Makefile
```

---

### **2 Å¾ingsnis: Kambarys klasÄ— (kompozicija)**

**Direktorija:** `U3/02/`

**Reikalavimai:**

Sukurkite **Kambarys** klasÄ™, kuri **turi** langus ir duris:

#### **Kambarys klasÄ—:**

**Private nariai:**
- `float ilgis` - kambario ilgis (m)
- `float plotis` - kambario plotis (m)
- `float aukstis` - kambario aukÅ¡tis (m)
- `vector<Langas> langai` - **kolekcija langÅ³** (value semantics)
- `Durys* durys` - **rodyklÄ— Ä¯ duris** (pointer semantics)

**Public metodai:**
- `Kambarys(float i, float p, float a)` - konstruktorius
  - Inicializuoja matmenis
  - `durys = nullptr` (pradÅ¾ioje nÄ—ra durÅ³)
- `~Kambarys()` - destruktorius
  - `delete durys` (jei `durys != nullptr`)
  - `durys = nullptr`
  - `langai.clear()` (nors vektorius ir taip nusivals)
- `void pridetiLanga(const Langas& langas)` - pridÄ—ti langÄ…
  - `langai.push_back(langas)` - kopijuoja Ä¯ vektoriÅ³
- `void nustatytiDuris(Durys* d)` - nustatyti duris
  - `durys = d`
- Getters: `gautiIlgi()`, `gautiPloti()`, `gautiAuksti()`

**Kompozicijos skirtumas:**
- **Langai** saugomi **value** (`vector<Langas>`) - **kopijavimas**
- **Durys** saugomos **pointer** (`Durys*`) - **dalijimasis nuoroda**

**Testas:**
```cpp
// Sukurti langus (lokalÅ«s objektai)
Langas l1(1.5, 1.0);
Langas l2(1.5, 1.0);

// Sukurti duris (dynamic)
Durys* d1 = new Durys(2.0, 0.9);

// Sukurti kambarÄ¯
Kambarys kambarys(5.0, 4.0, 3.0);
kambarys.pridetiLanga(l1);  // Kopijuoja Ä¯ vektoriÅ³
kambarys.pridetiLanga(l2);
kambarys.nustatytiDuris(d1);  // Priskiria rodyklÄ™

cout << "Kambarys: " << kambarys.gautiIlgi() << "Ã—" 
     << kambarys.gautiPloti() << "Ã—" 
     << kambarys.gautiAuksti() << endl;
```

**FailÅ³ struktÅ«ra:**
```
U3/02/
â”œâ”€â”€ Langas.h, Langas.cpp
â”œâ”€â”€ Durys.h, Durys.cpp
â”œâ”€â”€ Kambarys.h       â† NAUJAS
â”œâ”€â”€ Kambarys.cpp     â† NAUJAS
â”œâ”€â”€ main.cpp
â””â”€â”€ Makefile
```

---

### **3 Å¾ingsnis: SkaiÄiavimai (globalios funkcijos) + logging**

**Direktorija:** `U3/03/`

**Reikalavimai:**

PridÄ—kite skaiÄiavimus ir iÅ¡samÅ³ logging:

#### **Globalios funkcijos:**

Sukurkite **atskirÄ… failÄ…** `skaiciavimai.h` / `skaiciavimai.cpp`:

**1. SienÅ³ ploto skaiÄiavimas:**
```cpp
float apskaiciuotiSienuPlota(const Kambarys& k);
```

**Algoritmas:**
```
1. Perimetras = 2 Ã— (ilgis + plotis)
2. SienÅ³ plotas = perimetras Ã— aukÅ¡tis
3. Atimti visÅ³ langÅ³ plotus
4. Atimti durÅ³ plotÄ…
5. GrÄ…Å¾inti rezultatÄ…
```

**2. GrindjuosÄiÅ³ ilgio skaiÄiavimas:**
```cpp
float apskaiciuotiGrindjuscesIlgi(const Kambarys& k);
```

**Algoritmas:**
```
1. Perimetras = 2 Ã— (ilgis + plotis)
2. Atimti durÅ³ plotÄ¯
3. GrÄ…Å¾inti rezultatÄ…
```

**SVARBU:** Å ios funkcijos **ne metodai** - jos **globalios** (uÅ¾ klasÄ—s ribÅ³).

**KodÄ—l globalios?**
- Demonstruoja **globalias** vs **metodÅ³** funkcijas
- Kambarys neturi "Å¾inoti" apie skaiÄiavimus (separation of concerns)
- Galima skirtingi skaiÄiavimo algoritmai skirtingiems tikslams

#### **Logging patobulinimai:**

VisÅ³ klasiÅ³ konstruktoriuose/destruktoriuose:

```cpp
// Langas konstruktorius
Langas::Langas(float a, float p) : aukstis(a), plotis(p) {
    sukurtaLangu++;
    cout << "[DEBUG] Langas sukurtas (" << aukstis << "Ã—" << plotis 
         << "). Viso langu: " << sukurtaLangu << endl;
}

// Langas destruktorius
Langas::~Langas() {
    sukurtaLangu--;
    cout << "[DEBUG] Langas sunaikintas. Liko langu: " 
         << sukurtaLangu << endl;
}
```

AnalogiÅ¡kai `Durys` ir `Kambarys`.

**Testas:**
```cpp
Kambarys kambarys(5.0, 4.0, 3.0);

Langas l1(1.5, 1.0);
Langas l2(1.5, 1.0);
kambarys.pridetiLanga(l1);
kambarys.pridetiLanga(l2);

Durys* d1 = new Durys(2.0, 0.9);
kambarys.nustatytiDuris(d1);

float sienuPlotas = apskaiciuotiSienuPlota(kambarys);
float grindjusces = apskaiciuotiGrindjuscesIlgi(kambarys);

cout << "Sienu plotas: " << sienuPlotas << " mÂ²" << endl;
cout << "Grindjusciu ilgis: " << grindjusces << " m" << endl;
```

**Pavyzdys:**
```
Sienu plotas: 48.5 mÂ²
Grindjusciu ilgis: 17.1 m
```

**FailÅ³ struktÅ«ra:**
```
U3/03/
â”œâ”€â”€ Langas.h, Langas.cpp
â”œâ”€â”€ Durys.h, Durys.cpp
â”œâ”€â”€ Kambarys.h, Kambarys.cpp
â”œâ”€â”€ skaiciavimai.h      â† NAUJAS
â”œâ”€â”€ skaiciavimai.cpp    â† NAUJAS
â”œâ”€â”€ main.cpp
â””â”€â”€ Makefile
```

---

## ğŸ“¦ Pateikimas

### **GitLab direktorijÅ³ struktÅ«ra:**

```
cpp-2026/
â”œâ”€â”€ README.md
â”œâ”€â”€ .gitignore
â”œâ”€â”€ U1/, U2/
â””â”€â”€ U3/
    â”œâ”€â”€ README.md          â† UÅ¾duoties santrauka (PRIVALOMA)
    â”œâ”€â”€ 01/                â† Langas + Durys klasÄ—s
    â”‚   â”œâ”€â”€ Langas.h, Langas.cpp
    â”‚   â”œâ”€â”€ Durys.h, Durys.cpp
    â”‚   â”œâ”€â”€ main.cpp
    â”‚   â””â”€â”€ Makefile
    â”œâ”€â”€ 02/                â† Kambarys (kompozicija)
    â”‚   â”œâ”€â”€ Langas.h, Langas.cpp
    â”‚   â”œâ”€â”€ Durys.h, Durys.cpp
    â”‚   â”œâ”€â”€ Kambarys.h, Kambarys.cpp
    â”‚   â”œâ”€â”€ main.cpp
    â”‚   â””â”€â”€ Makefile
    â””â”€â”€ 03/                â† SkaiÄiavimai (globalios) - FINAL
        â”œâ”€â”€ Langas.h, Langas.cpp
        â”œâ”€â”€ Durys.h, Durys.cpp
        â”œâ”€â”€ Kambarys.h, Kambarys.cpp
        â”œâ”€â”€ skaiciavimai.h, skaiciavimai.cpp
        â”œâ”€â”€ main.cpp
        â””â”€â”€ Makefile
```

### **Git workflow:**

```bash
git add U3/01/
git commit -m "U3: 1 Å¾ingsnis - Langas ir Durys klasÄ—s"
git push

git add U3/02/
git commit -m "U3: 2 Å¾ingsnis - Kambarys kompozicija"
git push

git add U3/03/
git commit -m "U3: 3 Å¾ingsnis - SkaiÄiavimai ir logging"
git push
```

### **U3/README.md Å¡ablonas:**

```markdown
# U3: Kompozicija (has-a ryÅ¡ys)

**BÅ«sena**: âœ… Atlikta  
**Pateikta**: 2026-03-14

---

## ğŸ“ Å½ingsniai

| Å½ingsnis | Direktorija | ApraÅ¡ymas |
|----------|-------------|-----------|
| 1 | `01/` | Langas ir Durys klasÄ—s (static counter) |
| 2 | `02/` | Kambarys kompozicija (vector + pointer) |
| 3 | `03/` | SkaiÄiavimai (globalios funkcijos) |

---

## ğŸ§ª Testavimas

**Testas 1 (kompozicija)**:
```
Kambarys: 5Ã—4Ã—3
LangÅ³: 2
DurÅ³: 1
âœ… VEIKIA
```

**Testas 2 (skaiÄiavimai)**:
```
SienÅ³ plotas: 48.5 mÂ²
GrindjuosÄiÅ³ ilgis: 17.1 m
âœ… VEIKIA
```

---

## ğŸ’­ PagrindinÄ—s Ä¯Å¾valgos

1. Kompozicija - vienas objektas "turi" kitus
2. Vector vs pointer - skirtinga semantika
3. Statiniai nariai - klasÄ—s lygio duomenys
4. Globalios funkcijos vs metodai
```

### **Moodle pateikimas:**

```bash
cd cpp-2026
git archive --format=zip --output=U3_VardasPavarde.zip HEAD U3/ README.md .gitignore
```

---

## âœ… Vertinimo kriterijai

| Kriterijus | Balai |
|------------|-------|
| Programa kompiliuojasi be klaidÅ³ | 15% |
| Langas ir Durys klasÄ—s veikia | 15% |
| Static counter veikia | 10% |
| Kambarys kompozicija veikia | 25% |
| Destruktorius atlaisvina duris | 10% |
| Globalios funkcijos veikia | 15% |
| Logging aiÅ¡kus | 5% |
| README.md su testais | 5% |
| **TOTAL** | **100%** |

---

## ğŸ’¡ Patarimai

1. **Statiniai nariai** - inicializuoti **uÅ¾ klasÄ—s ribÅ³** (`.cpp`)
2. **Vector vs pointer**:
   - `vector<Langas>` - **kopijuoja** objektus (value)
   - `Durys*` - **dalijasi** nuoroda (pointer)
3. **Destruktorius** - patikrinti `if (durys != nullptr)` prieÅ¡ `delete`
4. **Globalios funkcijos** - perduoti `const Kambarys&` (reference)
5. **Logging** - padeda debug'inti (kada objektai kuriami/naikinami)
6. **FailÅ³ skaiÄius** - U3/03 turi **8 failus** (6 `.cpp` + Makefile + main)

---

## ğŸ”— Naudingos nuorodos

- [C++ kompozicija](https://en.cppreference.com/w/cpp/language/classes#Composition)
- [Static members](https://en.cppreference.com/w/cpp/language/static)
- [Vector container](https://en.cppreference.com/w/cpp/container/vector)

---

## â“ DaÅ¾nai uÅ¾duodami klausimai

**K: KodÄ—l `langai` - vector, o `durys` - pointer?**  
A: Demonstruoti skirtingas kompozicijos formas. LangÅ³ gali bÅ«ti daug (vector), durÅ³ - vienos (pointer).

**K: KodÄ—l globalios funkcijos, ne metodai?**  
A: Demonstruoti skirtumus. VÄ—liau (U4) grÄ¯Å¡ime prie metodÅ³.

**K: Ar reikia `langai.clear()` destruktoriuje?**  
A: Ne (vector destruktorius automatiÅ¡kai), bet gera praktika.

**K: KodÄ—l `sukurtaLangu` - static?**  
A: Nes tai **klasÄ—s lygio** duomenys (bendri visiems objektams), ne **objekto lygio**.

**Daugiau klausimÅ³?** â†’ Å½r. [UÅ¾duoÄiÅ³ Gidas - DUK](UzduotiuGidas.md#duk)

---

**SÄ—kmÄ—s!** ğŸš€
