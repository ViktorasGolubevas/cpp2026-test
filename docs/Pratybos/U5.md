# U5: OperatoriÅ³ Perkrovimas ir IÅ¡imtys

**SavaitÄ—s:** 9-10  
**Svoris:** 1 balas  
**Terminas:** SavaitÄ—s 10 pabaiga

---

## ğŸ“š PrieÅ¡ pradedant

**Priminimas:** Taikomi tie patys reikalavimai kaip U1-U4.  
ğŸ‘‰ Å½r. **[UÅ¾duoÄiÅ³ Gidas](UzduotiuGidas.md)**

---

## ğŸ¯ UÅ¾duoties tikslas

IÅ¡mokti **perkrauti operatorius** (`+`, `+=`, `<`, `==`, `<<`). PirmÄ… kartÄ… naudoti **iÅ¡imtis** (exceptions) validacijai ir klaidÅ³ tvarkymui. Dirbti su **friend funkcijomis**.

---

## ğŸ“š Mokymosi tikslai

AtlikÄ™ Å¡iÄ… uÅ¾duotÄ¯, mokÄ—site:

- âœ… Perkrauti **aritmetinius operatorius** (`+`, `+=`)
- âœ… Perkrauti **palyginimo operatorius** (`<`, `==`)
- âœ… Perkrauti **iÅ¡vedimo operatoriÅ³** (`<<`)
- âœ… Naudoti **friend funkcijas** operatoriams
- âœ… **Mesti iÅ¡imtis** (`throw`) klaidÅ³ atvejais
- âœ… **Gaudyti iÅ¡imtis** (`try-catch`) saugiai
- âœ… Implementuoti paprastÄ… algoritmÄ… (DBD - didÅ¾iausias bendrasis daliklis)

---

## ğŸ’¡ Kas yra Trupmena?

**Trupmena** - matematinis skaiÄius $\frac{skaitiklis}{vardiklis}$.

**PavyzdÅ¾iai:**
- $\frac{1}{2}$ (viena pusÄ—)
- $\frac{3}{4}$ (trys ketvirtadaliai)
- $\frac{5}{3}$ (neteisinga trupmena)

**Operacijos:**
- **SudÄ—tis**: $\frac{1}{2} + \frac{1}{4} = \frac{3}{4}$
- **Palyginimas**: $\frac{1}{2} < \frac{3}{4}$
- **Paprastinimas**: $\frac{6}{8} = \frac{3}{4}$ (dalinti iÅ¡ DBD=2)

---

## ğŸ’¡ OperatoriÅ³ perkrovimas

**OperatoriÅ³ perkrovimas** - galimybÄ— naudoti standartinÄ¯ C++ operatoriÅ³ (`+`, `==`, `<<`) su savomis klasÄ—mis.

**Pavyzdys:**
```cpp
Trupmena a(1, 2);  // 1/2
Trupmena b(1, 4);  // 1/4

Trupmena c = a + b;  // Naudojame + operatoriÅ³!
cout << c;           // Naudojame << operatoriÅ³!
```

**KodÄ—l naudinga?**
- NatÅ«rali sintaksÄ— (kaip su `int`, `float`)
- Lengviau skaityti kodÄ…
- Intuityvu matematikai

---

## ğŸ’¡ Kas yra Exceptions (IÅ¡imtys)?

**IÅ¡imtys** - mechanizmas praneÅ¡ti apie **klaidas** programos vykdymo metu.

**Pavyzdys:**
```cpp
Trupmena a(1, 0);  // KLAIDA: vardiklis negali bÅ«ti 0!
```

**Be iÅ¡imÄiÅ³:**
```cpp
if (vardiklis == 0) {
    cout << "KLAIDA!" << endl;
    return;  // Bet kaip praneÅ¡ti?
}
```

**Su iÅ¡imtimis:**
```cpp
if (vardiklis == 0) {
    throw invalid_argument("Vardiklis negali bÅ«ti 0!");
}
```

**Gaudymas:**
```cpp
try {
    Trupmena a(1, 0);  // Klaida!
} catch (invalid_argument& e) {
    cout << "Sugauta klaida: " << e.what() << endl;
}
```

---

## ğŸ“‹ UÅ¾duoties Å¾ingsniai

### **1 Å¾ingsnis: Basic Trupmena + IÅ¡imtys**

**Direktorija:** `U5/01/`

**Reikalavimai:**

Sukurti **Trupmena** klasÄ™ su:

**Private nariai:**
```cpp
int skaitiklis;
int vardiklis;
```

**Public metodai:**
```cpp
// Konstruktorius
Trupmena(int s, int v);

// Getters
int gautiSkaitikli() const;
int gautiVardikli() const;

// Spausdinimas
void spausdinti() const;  // IÅ¡veda: "skaitiklis/vardiklis"
```

**Konstruktorius su validacija:**
```cpp
Trupmena::Trupmena(int s, int v) {
    // VALIDACIJA: Vardiklis negali bÅ«ti 0!
    if (v == 0) {
        throw invalid_argument("Vardiklis negali bÅ«ti 0!");
    }
    
    skaitiklis = s;
    vardiklis = v;
}
```

**main.cpp testas:**
```cpp
// Testas 1: Teisingi parametrai
cout << "--- Testas 1: Teisinga trupmena ---" << endl;
try {
    Trupmena a(1, 2);
    a.spausdinti();  // 1/2
} catch (invalid_argument& e) {
    cout << "Klaida: " << e.what() << endl;
}

// Testas 2: Neteisingi parametrai (vardiklis = 0)
cout << "\n--- Testas 2: Blogas vardiklis ---" << endl;
try {
    Trupmena b(1, 0);  // Turi mesti iÅ¡imtÄ¯!
    b.spausdinti();
} catch (invalid_argument& e) {
    cout << "Sugauta klaida: " << e.what() << endl;
}

cout << "\nPrograma tÄ™siasi..." << endl;
```

**Pavyzdys:**
```
--- Testas 1: Teisinga trupmena ---
1/2

--- Testas 2: Blogas vardiklis ---
Sugauta klaida: Vardiklis negali bÅ«ti 0!

Programa tÄ™siasi...
```

**FailÅ³ struktÅ«ra:**
```
U5/01/
â”œâ”€â”€ Trupmena.h
â”œâ”€â”€ Trupmena.cpp
â”œâ”€â”€ main.cpp
â””â”€â”€ Makefile
```

---

### **2 Å¾ingsnis: Operatoriai (+, +=, <, ==)**

**Direktorija:** `U5/02/`

**Reikalavimai:**

PridÄ—ti operatorius:

**1. SudÄ—ties operatorius (`+`):**
```cpp
// Trupmena.h
Trupmena operator+(const Trupmena& kita) const;
```

**Algoritmas:**
```
a/b + c/d = (a*d + c*b) / (b*d)
```

**Implementacija:**
```cpp
Trupmena Trupmena::operator+(const Trupmena& kita) const {
    int naujasSk = skaitiklis * kita.vardiklis + kita.skaitiklis * vardiklis;
    int naujasVard = vardiklis * kita.vardiklis;
    return Trupmena(naujasSk, naujasVard);
}
```

**2. Compound assignment (`+=`):**
```cpp
// Trupmena.h
Trupmena& operator+=(const Trupmena& kita);
```

**Implementacija:**
```cpp
Trupmena& Trupmena::operator+=(const Trupmena& kita) {
    *this = *this + kita;  // Naudojame operator+
    return *this;
}
```

**3. Palyginimo operatoriai:**
```cpp
// Trupmena.h
bool operator<(const Trupmena& kita) const;
bool operator==(const Trupmena& kita) const;
```

**Algoritmas:**
```
a/b < c/d  âŸº  a*d < c*b
a/b == c/d  âŸº  a*d == c*b
```

**Testas:**
```cpp
Trupmena a(1, 2);  // 1/2
Trupmena b(1, 4);  // 1/4

// operator+
Trupmena c = a + b;
cout << "1/2 + 1/4 = ";
c.spausdinti();  // 6/8 (vÄ—liau paprastinsime)

// operator+=
a += b;
cout << "Po += : ";
a.spausdinti();  // 6/8

// Palyginimas
Trupmena x(1, 2);
Trupmena y(2, 4);
cout << "1/2 == 2/4? " << (x == y ? "Taip" : "Ne") << endl;  // Ne (kol kas!)

Trupmena z(1, 3);
cout << "1/3 < 1/2? " << (z < x ? "Taip" : "Ne") << endl;  // Taip
```

---

### **3 Å¾ingsnis: Paprastinimas (DBD) + operator<<**

**Direktorija:** `U5/03/`

**Reikalavimai:**

**1. DBD (DidÅ¾iausias Bendrasis Daliklis):**

```cpp
// Private helper funkcija
int Trupmena::dbd(int a, int b) const {
    // Euklido algoritmas
    a = abs(a);  // AbsoliuÄios reikÅ¡mÄ—s
    b = abs(b);
    
    while (b != 0) {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}
```

**2. Paprastinimo metodas:**
```cpp
// Public metodas
void Trupmena::paprastinti() {
    int d = dbd(skaitiklis, vardiklis);
    skaitiklis /= d;
    vardiklis /= d;
}
```

**3. Papildyti konstruktoriÅ³:**
```cpp
Trupmena::Trupmena(int s, int v) {
    if (v == 0) {
        throw invalid_argument("Vardiklis negali bÅ«ti 0!");
    }
    
    skaitiklis = s;
    vardiklis = v;
    paprastinti();  // Automatinis paprastinimas!
}
```

**4. operator<< (friend funkcija!):**

```cpp
// Trupmena.h
class Trupmena {
    // ...
    
    // Friend funkcija (ne metodas!)
    friend ostream& operator<<(ostream& out, const Trupmena& t);
};

// Trupmena.cpp (UÅ½ klasÄ—s ribÅ³!)
ostream& operator<<(ostream& out, const Trupmena& t) {
    out << t.skaitiklis << "/" << t.vardiklis;
    return out;
}
```

**Testas:**
```cpp
Trupmena a(6, 8);   // AutomatiÅ¡kai paprastins â†’ 3/4
cout << "6/8 paprastinta: " << a << endl;  // operator<< !

Trupmena b(1, 2);
Trupmena c(1, 4);
Trupmena d = b + c;
cout << "1/2 + 1/4 = " << d << endl;  // 3/4 (paprastinta!)

// Palyginimas po paprastinimo
Trupmena x(1, 2);
Trupmena y(2, 4);  // Paprastins â†’ 1/2
cout << "1/2 == 2/4? " << (x == y ? "Taip" : "Ne") << endl;  // Taip!
```

**Pavyzdys:**
```
6/8 paprastinta: 3/4
1/2 + 1/4 = 3/4
1/2 == 2/4? Taip
```

---

## ğŸ“¦ Pateikimas

### **GitLab direktorijÅ³ struktÅ«ra:**

```
cpp-2026/
â”œâ”€â”€ README.md
â”œâ”€â”€ U1/, U2/, U3/, U4/
â””â”€â”€ U5/
    â”œâ”€â”€ README.md          â† UÅ¾duoties santrauka (PRIVALOMA)
    â”œâ”€â”€ 01/                â† Basic + exceptions
    â”‚   â”œâ”€â”€ Trupmena.h
    â”‚   â”œâ”€â”€ Trupmena.cpp
    â”‚   â”œâ”€â”€ main.cpp
    â”‚   â””â”€â”€ Makefile
    â”œâ”€â”€ 02/                â† Operatoriai (+, +=, <, ==)
    â”‚   â””â”€â”€ ... (visi failai)
    â””â”€â”€ 03/                â† Paprastinimas + operator<< - FINAL
        â””â”€â”€ ... (visi failai)
```

### **U5/README.md Å¡ablonas:**

```markdown
# U5: OperatoriÅ³ Perkrovimas ir IÅ¡imtys

**BÅ«sena**: âœ… Atlikta  
**Pateikta**: 2026-04-11

---

## ğŸ“ Å½ingsniai

| Å½ingsnis | Direktorija | ApraÅ¡ymas |
|----------|-------------|-----------|
| 1 | `01/` | Basic Trupmena + exceptions validacijai |
| 2 | `02/` | Operatoriai (+, +=, <, ==) |
| 3 | `03/` | Paprastinimas (DBD) + operator<< |

---

## ğŸ§ª Testavimas

**Testas 1 (IÅ¡imtys)**:
```
Trupmena(1, 0) â†’ Sugauta klaida: Vardiklis negali bÅ«ti 0!
âœ… VEIKIA
```

**Testas 2 (Operatoriai)**:
```
1/2 + 1/4 = 3/4
1/2 < 3/4 = Taip
âœ… VEIKIA
```

**Testas 3 (Paprastinimas)**:
```
6/8 â†’ 3/4 (automatiÅ¡kai)
1/2 == 2/4 â†’ Taip
âœ… VEIKIA
```

---

## ğŸ’­ PagrindinÄ—s Ä¯Å¾valgos

1. OperatoriÅ³ perkrovimas - natÅ«rali sintaksÄ—
2. IÅ¡imtys - saugus klaidÅ³ tvarkymas
3. Friend funkcijos - operator<< uÅ¾ klasÄ—s ribÅ³
4. DBD algoritmas - Euklido metodas
5. Automatinis paprastinimas konstruktoriuje
```

---

## âœ… Vertinimo kriterijai

| Kriterijus | Balai |
|------------|-------|
| Programa kompiliuojasi be klaidÅ³ | 10% |
| IÅ¡imtys veikia (validacija) | 20% |
| operator+ veikia | 15% |
| operator+= veikia | 10% |
| operator< ir operator== veikia | 10% |
| operator<< veikia (friend) | 15% |
| Paprastinimas (DBD) veikia | 15% |
| README.md su testais | 5% |
| **TOTAL** | **100%** |

---

## ğŸ’¡ Patarimai

1. **Exceptions**:
   - `throw invalid_argument("message")` - mesti
   - `try { ... } catch (invalid_argument& e) { ... }` - gaudyti
   - `#include <stdexcept>` - reikalingas!

2. **Operatoriai**:
   - Member funkcijos: `+`, `+=`, `<`, `==`
   - Friend funkcija: `<<` (reikia prieigos prie private)

3. **DBD algoritmas**:
   - Euklido metodas: while loop su `%`
   - Naudoti `abs()` (absoliuÄios reikÅ¡mÄ—s)

4. **operator<< formatas**:
   - `friend ostream& operator<<(ostream&, const Trupmena&);`
   - Implementuoti **uÅ¾ klasÄ—s ribÅ³**!

5. **Paprastinimas**:
   - Kviesti `paprastinti()` konstruktoriuje
   - Automatinis po kiekvienos operacijos

---

## ğŸ”— Naudingos nuorodos

- [Operator overloading](https://en.cppreference.com/w/cpp/language/operators)
- [Exception handling](https://en.cppreference.com/w/cpp/language/exceptions)
- [Friend functions](https://en.cppreference.com/w/cpp/language/friend)

---

## â“ DaÅ¾nai uÅ¾duodami klausimai

**K: KodÄ—l operator<< - friend, o operator+ - ne?**  
A: operator<< - **uÅ¾ klasÄ—s ribÅ³** (`cout << trupmena`), reikia prieigos prie private. operator+ - **metodas** (`trupmena1 + trupmena2`).

**K: Kas yra invalid_argument?**  
A: StandartinÄ— C++ iÅ¡imties klasÄ— (`<stdexcept>`). Naudojama neteisingiems argumentams.

**K: KodÄ—l operator+= grÄ…Å¾ina nuorodÄ… (`&`)?**  
A: LeidÅ¾ia chain'inimÄ…: `a += b += c;`

**K: Ar reikia paprastinti po kiekvienos operacijos?**  
A: Konstruktorius paprastina automatiÅ¡kai, bet gera praktika paprastinti ir po `operator+`.

**K: Kaip veikia DBD (Euklidas)?**  
A: Iteratyviai: `a % b`, kol likutis 0. Pavyzdys: DBD(6,8) = 2.

**Daugiau klausimÅ³?** â†’ Å½r. [UÅ¾duoÄiÅ³ Gidas - DUK](UzduotiuGidas.md#duk)

---

**SÄ—kmÄ—s!** ğŸš€
